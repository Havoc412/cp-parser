# Mini 语言词法分析器

本项目实现了一个 Mini 语言的词法分析器，能够分析源程序并输出词法分析的结果，为后续的语法分析提供支持。

## 目录结构

```
ex-2/
├── lexer.h         // 词法分析器头文件
├── lexer.cpp       // 词法分析器实现
├── main.cpp        // 主程序
├── README.md       // 本文档
└── examples/       // 测试用例
    ├── test1.txt   // 基本测试用例
    └── test2.txt   // 复杂测试用例（包含错误情况）
```

## 功能特性

1. 支持 Mini 语言的所有词法元素，包括：
   - 关键字（int、double、float、if、then、else、return、while）
   - 运算符（+、-、*、/、=、==、<、<=、>、>=）
   - 分隔符（(、)、[、]、{、}、,、;）
   - 常量（整型、浮点型）
   - 标识符

2. 提供灵活的接口，便于语法分析器调用：
   - `void initLexer(FILE* fp)`：初始化词法分析器
   - `TokenAttr getNextToken()`：获取下一个 Token
   - `void ungetToken()`：回退一个 Token（预读功能）

3. 错误处理：
   - 检测并报告非法标识符、非法数字格式等词法错误
   - 提供详细的错误信息，包括错误类型和行号

4. 结果输出：
   - 将分析结果输出到文件，便于查看和调试
   - 包含 Token 类型、值和行号等信息

## 使用方法

### 编译

```bash
g++ -std=c++11 main.cpp lexer.cpp -o lexer
```

### 运行

```bash
./lexer
```

运行后，程序会提示输入要分析的文件路径。输入文件路径后，程序会进行词法分析并输出结果。

### 输出说明

程序会在输入文件的同级目录下创建一个以文件名加"-output"为名的目录，其中包含：
- `tokens.txt`：包含所有识别出的 Token 信息
- `errors.txt`：包含所有词法错误信息（如果有的话）

## Mini 语言简介

Mini 语言是一个简化的类 C 语言，支持基本的语法结构，如变量声明、赋值、条件语句、循环语句等。它的设计目的是作为编译原理课程的教学示例语言。

### 示例程序

```c
int main() {
    int a = 10;
    int b = 20;
    
    if (a < b) {
        a = a + 1;
    } else {
        b = b - 1;
    }
    
    return 0;
}
```

## 未来扩展

本词法分析器设计为模块化结构，便于后续扩展为完整的编译器前端。计划中的扩展包括：

1. 语法分析器：基于递归下降或 LR 分析方法，构建语法树
2. 语义分析：类型检查、作用域分析等
3. 中间代码生成：生成三地址码或抽象语法树
4. 目标代码生成：生成汇编代码或机器码 